CREATE OR REPLACE FUNCTION actualizar_duracion()
RETURNS TRIGGER AS $$
BEGIN
    NEW.duracion := NEW.fecha_fin - NEW.fecha_inicio;
    RETURN NEW;
END;

$$ LANGUAGE plpgsql;

CREATE TRIGGER calcular_duracion
BEFORE INSERT OR UPDATE ON promocion
FOR EACH ROW
EXECUTE FUNCTION actualizar_duracion();
